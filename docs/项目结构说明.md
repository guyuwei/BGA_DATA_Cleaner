# EHR数据清洗 - 项目结构说明

## 📁 整理后的项目结构

```
EHR数据清洗/
├── app/                          # 界面应用
│   ├── main.py                   # 主程序
│   ├── 已移除背景的jellycat-Cecile-Chicken-CEC3C.png  # Mac logo
│   └── 蛇蛇.png                  # Windows logo
│
├── scripts/                      # 步骤脚本（可选，当前在根目录）
│   ├── 步骤1_重新开始.py
│   ├── 步骤2_StudyCohort筛选.py
│   ├── 步骤3_药物医嘱整理.py
│   ├── 步骤4_合并症提取.py
│   ├── 步骤5_手术事件提取.py
│   ├── 步骤6_禁食营养提取.py
│   └── 步骤7_拼接时序大表.py
│
├── config/                       # 配置文件（可选，当前在根目录）
│   ├── variables.yaml
│   ├── rules.yaml
│   ├── 药物分类分析.json
│   └── 所有文件列名摘要.txt
│
├── docs/                         # 文档和说明（已整理）
│   ├── README.md
│   ├── 变量表和规则更新日志_2026-02-02.md
│   ├── 合并症变量说明.txt
│   └── ...
│
├── build/                        # 构建相关（已整理）
│   ├── build.sh                  # Mac 打包脚本（从项目根目录执行）
│   ├── build.bat                 # Windows 打包脚本（从项目根目录执行）
│   ├── EHR数据清洗.spec          # PyInstaller 配置
│   └── requirements.txt
│
├── tools/                        # 工具脚本（已整理）
│   ├── run_all.sh
│   └── 工具_查看列名.py
│
├── 步骤1~7*.py                   # 步骤脚本（保留在根目录，便于运行）
├── variables.yaml                 # 配置文件（保留在根目录）
├── rules.yaml                    # 配置文件（保留在根目录）
├── 所有文件列名摘要.txt          # 配置文件（保留在根目录）
│
├── Health/                       # 数据输出目录（步骤1~7生成）
├── HYPO/                         # 数据输出目录
├── 原始数据/                     # 原始数据输入（已重命名，原「微信原文件！！」）
│
└── EHR数据清洗_发布/            # 发布包（运行 build/整理发布文件夹.py 生成）
```

## ✅ 已完成的整理

1. **清理临时文件**：删除 `~$*` 临时文件和 `.DS_Store`
2. **清理 app/ 图片**：删除不需要的图片，只保留 logo
3. **整理文档**：所有文档移至 `docs/` 目录
4. **整理构建文件**：构建相关文件移至 `build/` 目录
5. **整理工具**：工具脚本移至 `tools/` 目录
6. **重命名文件夹**：`微信原文件！！` → `原始数据`
7. **更新路径引用**：已更新 `步骤1_重新开始.py` 中的路径

## 📝 文件夹命名规范

- ✅ **使用中文或英文**：避免特殊符号（如 `！！`）
- ✅ **统一风格**：目录名清晰表达用途
- ✅ **已重命名**：
  - `微信原文件！！` → `原始数据`

## 🔧 使用说明

### 运行界面
```bash
python3 app/main.py
```

### 打包（从项目根目录执行）
```bash
# Mac
build/build.sh

# Windows
build\build.bat
```

### 运行步骤脚本
```bash
# 单个步骤
python3 步骤1_重新开始.py

# 或使用工具
tools/run_all.sh
```

## 📌 注意事项

1. **步骤脚本和配置文件**：当前保留在根目录，避免路径问题
2. **如需移动脚本**：需同步更新 `app/main.py` 中的 `STEPS` 路径
3. **构建脚本**：`build.sh` 和 `build.bat` 已更新，从项目根目录执行时会自动切换到正确路径
4. **数据目录**：`原始数据/`、`Health/`、`HYPO/` 保留在根目录
